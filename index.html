<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Jam Digital Masjid</title>

<style>
body{
    margin:0;
    background:black;
    color:white;
    font-family:Arial;
    text-align:center;
}

.header{
    background:green;
    padding:10px;
    font-size:30px;
}

.clock{
    font-size:90px;
    color:lime;
    margin-top:10px;
}

.date{
    font-size:25px;
}

.container{
    display:flex;
    justify-content:center;
    margin-top:30px;
}

.box{
    border:2px solid white;
    margin:10px;
    padding:15px;
    width:150px;
}

.nama{
    font-size:25px;
}

.waktu{
    font-size:30px;
    color:yellow;
}

.running{
    position:fixed;
    bottom:0;
    width:100%;
    background:red;
    padding:10px;
    font-size:25px;
}
</style>

</head>

<body>

<div class="header">MASJID AL BAROKAH</div>

<div class="clock" id="clock"></div>
<div class="date" id="date"></div>

<h2 id="iqomah"></h2>

<div class="container">
<div class="box"><div class="nama">Subuh</div><div class="waktu" id="subuh"></div></div>
<div class="box"><div class="nama">Dzuhur</div><div class="waktu" id="dzuhur"></div></div>
<div class="box"><div class="nama">Ashar</div><div class="waktu" id="ashar"></div></div>
<div class="box"><div class="nama">Maghrib</div><div class="waktu" id="maghrib"></div></div>
<div class="box"><div class="nama">Isya</div><div class="waktu" id="isya"></div></div>
</div>

<div class="running">
Selamat datang di Masjid Al Barokah | Mohon matikan HP saat sholat
</div>

<script>

// ================= JAM REALTIME =================
function updateClock(){
let now = new Date();

document.getElementById("clock").innerHTML =
now.toLocaleTimeString("id-ID");

document.getElementById("date").innerHTML =
now.toLocaleDateString("id-ID",{weekday:'long',year:'numeric',month:'long',day:'numeric'});

checkIqomah();
}

setInterval(updateClock,1000);

// ================= JADWAL SHOLAT =================
let jadwal = {};

fetch("https://api.aladhan.com/v1/timingsByCity?city=Jakarta&country=Indonesia&method=11")
.then(res => res.json())
.then(data => {

jadwal = data.data.timings;

document.getElementById("subuh").innerHTML = jadwal.Fajr;
document.getElementById("dzuhur").innerHTML = jadwal.Dhuhr;
document.getElementById("ashar").innerHTML = jadwal.Asr;
document.getElementById("maghrib").innerHTML = jadwal.Maghrib;
document.getElementById("isya").innerHTML = jadwal.Isha;

});

// ================= IQOMAH COUNTDOWN =================
let waktuIqomah = 10; // menit setelah adzan

function checkIqomah(){

let now = new Date();
let jamSekarang = now.getHours()*60 + now.getMinutes();

let list = {
"Subuh":jadwal.Fajr,
"Dzuhur":jadwal.Dhuhr,
"Ashar":jadwal.Asr,
"Maghrib":jadwal.Maghrib,
"Isya":jadwal.Isha
};

for(let nama in list){

if(!list[nama]) continue;

let parts = list[nama].split(":");
let waktuAdzan = parseInt(parts[0])*60 + parseInt(parts[1]);

if(jamSekarang >= waktuAdzan && jamSekarang <= waktuAdzan + waktuIqomah){

let sisa = (waktuAdzan + waktuIqomah) - jamSekarang;

document.getElementById("iqomah").innerHTML =
"Iqomah " + nama + " dalam " + sisa + " menit";

return;
}
}

document.getElementById("iqomah").innerHTML = "";
}

</script>

</body>
</html>
